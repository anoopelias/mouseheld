!function($){function Mouseheld(element,step,options){this.element=element,this.step=step,this._defaults(options),this._setup()}for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)}),Mouseheld.prototype.remove=function(){$(this.element).unbind(".mouseheld")},Mouseheld.prototype._defaults=function(options){options=options||{},this.nextTime=0,this.initialDelay=options.initialDelay||500,this.delay=options.delay||100,this.running=!1},Mouseheld.prototype._setup=function(){var start=function(){this.running=!0,this._firstStep()}.bind(this),stop=function(){this.running=!1}.bind(this);$(this.element).bind("mousedown.mouseheld",start),$(this.element).bind("keydown.mouseheld",function(e){(13===e.which||32===e.which)&&start()}),$(document).bind("mouseup.mouseheld keyup.mouseheld",stop)},Mouseheld.prototype._firstStep=function(){this.step(),setTimeout(function(){this.running&&requestAnimationFrame(this._runStep.bind(this))}.bind(this),this.initialDelay)},Mouseheld.prototype._runStep=function(time){if(this.running){if(time<this.nextTime)return void requestAnimationFrame(this._runStep.bind(this));this.nextTime=time+this.delay,this.step(),requestAnimationFrame(this._runStep.bind(this))}},$.fn.mouseheld=function(step,options){return"function"==typeof step?this.each(function(){$.data(this,"plugin_mouseheld")||$.data(this,"plugin_mouseheld",new Mouseheld(this,step,options))}):"string"==typeof step&&"remove"===step?this.each(function(){var mouseheld=$.data(this,"plugin_mouseheld");mouseheld&&mouseheld.remove(),$.data(this,"plugin_mouseheld",null)}):void 0}}(jQuery);